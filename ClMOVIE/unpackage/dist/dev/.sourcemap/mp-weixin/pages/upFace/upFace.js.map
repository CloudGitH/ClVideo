{"version":3,"sources":["webpack:///D:/HbuilderXCode/ClMOVIE/main.js","webpack:///D:/HbuilderXCode/ClMOVIE/pages/upFace/upFace.vue?d60c","webpack:///D:/HbuilderXCode/ClMOVIE/pages/upFace/upFace.vue?f33a","webpack:///D:/HbuilderXCode/ClMOVIE/pages/upFace/upFace.vue?4539","webpack:///D:/HbuilderXCode/ClMOVIE/pages/upFace/upFace.vue?e22e","webpack:///D:/HbuilderXCode/ClMOVIE/pages/upFace/upFace.vue","webpack:///D:/HbuilderXCode/ClMOVIE/pages/upFace/upFace.vue?745d","webpack:///D:/HbuilderXCode/ClMOVIE/pages/upFace/upFace.vue?f15b"],"names":["createPage","Page","sysInfo","uni","getSystemInfoSync","SCREEN_WIDTH","screenWidth","PAGE_X","PAGE_Y","PR","pixelRatio","T_PAGE_X","T_PAGE_Y","CUT_L","CUT_T","CUT_R","CUT_B","CUT_W","CUT_H","IMG_RATIO","IMG_REAL_W","IMG_REAL_H","DRAFG_MOVE_RATIO","INIT_DRAG_POSITION","DRAW_IMAGE_W","data","globalUser","imageSrc","isShowImg","cropperInitW","cropperInitH","cropperW","cropperH","cropperL","cropperT","transL","transT","scaleP","imageW","imageH","cutL","cutT","cutB","cutR","qualityWidth","innerAspectRadio","onLoad","param","me","getStorageSync","file","loadImage","methods","confirmUp","imgSrc","showToast","title","icon","mask","duration","getKeyFn","then","uploadFile","id","getKey","filePath","name","header","userUniqueToken","success","res","console","log","result","JSON","parse","status","setStorageSync","hideToast","switchTab","url","msg","repick","chooseImage","count","sizeType","sourceType","tempFiles","path","setData","obj","that","Object","keys","forEach","key","$set","$data","getImage","_this","showLoading","getImageInfo","src","width","height","minRange","Math","ceil","hideLoading","contentStartMove","e","touches","pageX","pageY","contentMoveing","dragLengthX","dragLengthY","contentTouchEnd","ctx","createCanvasContext","drawImage","draw","canvasW","canvasH","canvasL","canvasT","canvasToTempFilePath","x","y","destWidth","destHeight","quality","canvasId","tempFacePath","tempFilePath","dragStart","dragMove","dragType","target","dataset","drag","dragLength"],"mappings":"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","file":"pages/upFace/upFace.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/upFace/upFace.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./upFace.vue?vue&type=template&id=57dd117e&\"\nvar renderjs\nimport script from \"./upFace.vue?vue&type=script&lang=js&\"\nexport * from \"./upFace.vue?vue&type=script&lang=js&\"\nimport style0 from \"./upFace.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"HbuilderXCode/ClMOVIE/pages/upFace/upFace.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upFace.vue?vue&type=template&id=57dd117e&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upFace.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upFace.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n// 裁剪数据start\nlet sysInfo = uni.getSystemInfoSync();\nlet SCREEN_WIDTH = sysInfo.screenWidth\nlet PAGE_X, // 手按下的x位置\n  PAGE_Y, // 手按下y的位置 \n  PR = sysInfo.pixelRatio, // dpi\n  T_PAGE_X, // 手移动的时候x的位置\n  T_PAGE_Y, // 手移动的时候Y的位置\n  CUT_L, // 初始化拖拽元素的left值\n  CUT_T, // 初始化拖拽元素的top值\n  CUT_R, // 初始化拖拽元素的\n  CUT_B, // 初始化拖拽元素的\n  CUT_W, // 初始化拖拽元素的宽度\n  CUT_H, //  初始化拖拽元素的高度\n  IMG_RATIO, // 图片比例\n  IMG_REAL_W, // 图片实际的宽度\n  IMG_REAL_H, // 图片实际的高度\n  DRAFG_MOVE_RATIO = 1, //移动时候的比例,\n  INIT_DRAG_POSITION = 100, // 初始化屏幕宽度和裁剪区域的宽度之差，用于设置初始化裁剪的宽度\n  DRAW_IMAGE_W = sysInfo.screenWidth // 设置生成的图片宽度\n// 裁剪数据start\n\nexport default {\n  data() {\n    return {\n      globalUser: {},\n      // 裁剪数据start\n      imageSrc: '',\n      isShowImg: false,\n      // 初始化的宽高\n      cropperInitW: SCREEN_WIDTH,\n      cropperInitH: SCREEN_WIDTH,\n      // 动态的宽高\n      cropperW: SCREEN_WIDTH,\n      cropperH: SCREEN_WIDTH,\n      // 动态的left top值\n      cropperL: 0,\n      cropperT: 0,\n      transL: 0,\n      transT: 0,\n      // 图片缩放值\n      scaleP: 0,\n      imageW: 0,\n      imageH: 0,\n      // 裁剪框 宽高\n      cutL: 0,\n      cutT: 0,\n      cutB: SCREEN_WIDTH,\n      cutR: '100%',\n      qualityWidth: DRAW_IMAGE_W,\n      innerAspectRadio: DRAFG_MOVE_RATIO,\n      // 裁剪数据end\n    }\n  },\n  onLoad(param) {\n    var me = this;\n    me.globalUser = uni.getStorageSync('globalUser')\n    // 图片渲染的数据\n    me.imageSrc = param.file\n    me.loadImage();\n    \n\n  },\n  methods: {\n\n    // 点击确定上传头像\n    confirmUp(imgSrc) {\n      var me = this;\n      uni.showToast({\n        title: '上传中',\n        icon: \"loading\",\n        mask: true,\n        duration: 5000\n      });\n      me.getKeyFn().then(function() {\n        uni.uploadFile({\n          'url': 'https://www.imovietrailer.com/superhero/user/uploadFace?userId=' + me.globalUser.id +\n            '&qq=' + me.getKey,\n          filePath: imgSrc,\n          name: \"file\",\n          header: {\n            \"headerUserId\": me.globalUser.id,\n            \"headerUserToken\": me.globalUser.userUniqueToken,\n          },\n          success: function(res) {\n            console.log(res)\n            var result = JSON.parse(res.data)\n            if (result.status == 200) {\n              me.globalUser = result.data\n              uni.setStorageSync('globalUser', result.data)\n              uni.hideToast();\n              uni.switchTab({\n                url: '../me/me'\n              })\n            } else {\n              uni.hideToast()\n              uni.showToast({\n                title: result.msg,\n                icon: \"none\",\n                mask: true,\n                duration: 1500\n              })\n            }\n\n          }\n        })\n      })\n    },\n    // 重新选择图片\n    repick() {\n      var me = this;\n      uni.chooseImage({\n        count: 1, //默认9\n        sizeType: ['compressed'], //可以指定是原图还是压缩图，默认二者都有\n        sourceType: ['album'], //从相册选择\n        success: function(res) {\n          me.file = res.tempFiles[0].path\n        }\n      });\n    },\n\n    /* \n      裁剪相关方法Start*********************************************\n    */\n    setData: function(obj) {\n      let that = this;\n      Object.keys(obj).forEach(function(key) {\n        that.$set(that.$data, key, obj[key])\n\n      });\n    },\n    getImage: function() {\n      var _this = this\n      uni.chooseImage({\n        success: function(res) {\n          _this.setData({\n            imageSrc: res.tempFiles[0].path,\n          })\n          _this.loadImage();\n        },\n      })\n    },\n    loadImage: function() {\n      var _this = this\n      uni.showLoading({\n        title: '图片加载中...',\n      })\n\n      uni.getImageInfo({\n        src: _this.imageSrc,\n        success: function success(res) {\n          IMG_RATIO = res.width / res.height\n          if (IMG_RATIO >= 1) {\n            IMG_REAL_W = SCREEN_WIDTH\n            IMG_REAL_H = SCREEN_WIDTH / IMG_RATIO\n          } else {\n            IMG_REAL_W = SCREEN_WIDTH * IMG_RATIO\n            IMG_REAL_H = SCREEN_WIDTH\n          }\n          let minRange = IMG_REAL_W > IMG_REAL_H ? IMG_REAL_W : IMG_REAL_H\n          INIT_DRAG_POSITION = minRange > INIT_DRAG_POSITION ? INIT_DRAG_POSITION : minRange\n          // 根据图片的宽高显示不同的效果   保证图片可以正常显示\n          if (IMG_RATIO >= 1) {\n            let cutT = Math.ceil((SCREEN_WIDTH / IMG_RATIO - (SCREEN_WIDTH / IMG_RATIO - INIT_DRAG_POSITION)) /\n              2);\n            let cutB = cutT;\n            let cutL = Math.ceil((SCREEN_WIDTH - SCREEN_WIDTH + INIT_DRAG_POSITION) / 2);\n            let cutR = cutL;\n            _this.setData({\n              cropperW: SCREEN_WIDTH,\n              cropperH: SCREEN_WIDTH / IMG_RATIO,\n              // 初始化left right\n              cropperL: Math.ceil((SCREEN_WIDTH - SCREEN_WIDTH) / 2),\n              cropperT: Math.ceil((SCREEN_WIDTH - SCREEN_WIDTH / IMG_RATIO) / 2),\n              cutL: cutL,\n              cutT: cutT,\n              cutR: cutR,\n              cutB: cutB,\n              // 图片缩放值\n              imageW: IMG_REAL_W,\n              imageH: IMG_REAL_H,\n              scaleP: IMG_REAL_W / SCREEN_WIDTH,\n              qualityWidth: DRAW_IMAGE_W,\n              innerAspectRadio: IMG_RATIO\n            })\n          } else {\n            let cutL = Math.ceil((SCREEN_WIDTH * IMG_RATIO - (SCREEN_WIDTH * IMG_RATIO)) / 2);\n            let cutR = cutL;\n            let cutT = Math.ceil((SCREEN_WIDTH - INIT_DRAG_POSITION) / 2);\n            let cutB = cutT;\n            _this.setData({\n              cropperW: SCREEN_WIDTH * IMG_RATIO,\n              cropperH: SCREEN_WIDTH,\n              // 初始化left right\n              cropperL: Math.ceil((SCREEN_WIDTH - SCREEN_WIDTH * IMG_RATIO) / 2),\n              cropperT: Math.ceil((SCREEN_WIDTH - SCREEN_WIDTH) / 2),\n\n              cutL: cutL,\n              cutT: cutT,\n              cutR: cutR,\n              cutB: cutB,\n              // 图片缩放值\n              imageW: IMG_REAL_W,\n              imageH: IMG_REAL_H,\n              scaleP: IMG_REAL_W / SCREEN_WIDTH,\n              qualityWidth: DRAW_IMAGE_W,\n              innerAspectRadio: IMG_RATIO\n            })\n          }\n          _this.setData({\n            isShowImg: true\n          })\n          uni.hideLoading()\n        }\n      })\n    },\n    // 拖动时候触发的touchStart事件\n    contentStartMove(e) {\n      PAGE_X = e.touches[0].pageX\n      PAGE_Y = e.touches[0].pageY\n    },\n\n    // 拖动时候触发的touchMove事件\n    contentMoveing(e) {\n      var _this = this\n      var dragLengthX = (PAGE_X - e.touches[0].pageX) * DRAFG_MOVE_RATIO\n      var dragLengthY = (PAGE_Y - e.touches[0].pageY) * DRAFG_MOVE_RATIO\n      // 左移\n      if (dragLengthX > 0) {\n        if (this.cutL - dragLengthX < 0) dragLengthX = this.cutL\n      } else {\n        if (this.cutR + dragLengthX < 0) dragLengthX = -this.cutR\n      }\n\n      if (dragLengthY > 0) {\n        if (this.cutT - dragLengthY < 0) dragLengthY = this.cutT\n      } else {\n        if (this.cutB + dragLengthY < 0) dragLengthY = -this.cutB\n      }\n      this.setData({\n        cutL: this.cutL - dragLengthX,\n        cutT: this.cutT - dragLengthY,\n        cutR: this.cutR + dragLengthX,\n        cutB: this.cutB + dragLengthY\n      })\n\n      PAGE_X = e.touches[0].pageX\n      PAGE_Y = e.touches[0].pageY\n    },\n\n    contentTouchEnd() {\n\n    },\n\n    // 获取图片\n    getImageInfo() {\n      var _this = this;\n      uni.showLoading({\n        title: '图片生成中...',\n      });\n\n      // 将图片写入画布\n      const ctx = uni.createCanvasContext('myCanvas');\n      ctx.drawImage(_this.imageSrc, 0, 0, IMG_REAL_W, IMG_REAL_H);\n      ctx.draw(true, () => {\n        // 获取画布要裁剪的位置和宽度   均为百分比 * 画布中图片的宽度    保证了在微信小程序中裁剪的图片模糊  位置不对的问题 canvasT = (_this.cutT / _this.cropperH) * (_this.imageH / pixelRatio)\n        var canvasW = ((_this.cropperW - _this.cutL - _this.cutR) / _this.cropperW) * IMG_REAL_W;\n        var canvasH = ((_this.cropperH - _this.cutT - _this.cutB) / _this.cropperH) * IMG_REAL_H;\n        var canvasL = (_this.cutL / _this.cropperW) * IMG_REAL_W;\n        var canvasT = (_this.cutT / _this.cropperH) * IMG_REAL_H;\n        uni.canvasToTempFilePath({\n          x: canvasL,\n          y: canvasT,\n          width: canvasW,\n          height: canvasH,\n          destWidth: canvasW,\n          destHeight: canvasH,\n          quality: 0.5,\n          canvasId: 'myCanvas',\n          success: function(res) {\n            uni.hideLoading();\n\n            // 成功获得地址的地方\n            var tempFacePath = res.tempFilePath;\n\n            // 截取到新的像以后，就进行上传\n            uni.showLoading({\n              mask: true\n            })\n\n\n            _this.confirmUp(tempFacePath)\n\n\n\n          }\n        });\n      });\n    },\n\n    // 设置大小的时候触发的touchStart事件\n    dragStart(e) {\n      T_PAGE_X = e.touches[0].pageX\n      T_PAGE_Y = e.touches[0].pageY\n      CUT_L = this.cutL\n      CUT_R = this.cutR\n      CUT_B = this.cutB\n      CUT_T = this.cutT\n    },\n\n    // 设置大小的时候触发的touchMove事件\n    dragMove(e) {\n      var _this = this\n      var dragType = e.target.dataset.drag\n      switch (dragType) {\n        case 'right':\n          var dragLength = (T_PAGE_X - e.touches[0].pageX) * DRAFG_MOVE_RATIO\n          if (CUT_R + dragLength < 0) dragLength = -CUT_R\n          this.setData({\n            cutR: CUT_R + dragLength\n          })\n          break;\n        case 'left':\n          var dragLength = (T_PAGE_X - e.touches[0].pageX) * DRAFG_MOVE_RATIO\n          if (CUT_L - dragLength < 0) dragLength = CUT_L\n          if ((CUT_L - dragLength) > (this.cropperW - this.cutR)) dragLength = CUT_L - (this.cropperW - this.cutR)\n          this.setData({\n            cutL: CUT_L - dragLength\n          })\n          break;\n        case 'top':\n          var dragLength = (T_PAGE_Y - e.touches[0].pageY) * DRAFG_MOVE_RATIO\n          if (CUT_T - dragLength < 0) dragLength = CUT_T\n          if ((CUT_T - dragLength) > (this.cropperH - this.cutB)) dragLength = CUT_T - (this.cropperH - this.cutB)\n          this.setData({\n            cutT: CUT_T - dragLength\n          })\n          break;\n        case 'bottom':\n          var dragLength = (T_PAGE_Y - e.touches[0].pageY) * DRAFG_MOVE_RATIO\n          if (CUT_B + dragLength < 0) dragLength = -CUT_B\n          this.setData({\n            cutB: CUT_B + dragLength\n          })\n          break;\n        case 'rightBottom':\n          var dragLengthX = (T_PAGE_X - e.touches[0].pageX) * DRAFG_MOVE_RATIO\n          var dragLengthY = (T_PAGE_Y - e.touches[0].pageY) * DRAFG_MOVE_RATIO\n\n          if (CUT_B + dragLengthY < 0) dragLengthY = -CUT_B\n          if (CUT_R + dragLengthX < 0) dragLengthX = -CUT_R\n          let cutB = CUT_B + dragLengthY;\n          let cutR = CUT_R + dragLengthX;\n\n          this.setData({\n            cutB: cutB,\n            cutR: cutR\n          })\n          break;\n        default:\n          break;\n      }\n    }\n    /*\n      裁剪相关方法end*********************************************\n    */\n\n  }\n}\n","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upFace.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./upFace.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1589421318006\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}